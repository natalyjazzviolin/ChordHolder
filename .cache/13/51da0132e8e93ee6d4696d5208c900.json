{"id":"v6lz","dependencies":[{"name":"C:\\Users\\natal\\Documents\\chord-holder-v1\\node_modules\\tone\\build\\esm\\core\\util\\Draw.js.map","includedInParent":true,"mtime":499162500000},{"name":"C:\\Users\\natal\\Documents\\chord-holder-v1\\node_modules\\tone\\Tone\\core\\util\\Draw.ts","includedInParent":true,"mtime":499162500000},{"name":"C:\\Users\\natal\\Documents\\chord-holder-v1\\package.json","includedInParent":true,"mtime":1596313565786},{"name":"C:\\Users\\natal\\Documents\\chord-holder-v1\\node_modules\\tone\\package.json","includedInParent":true,"mtime":1596312949653},{"name":"../context/ToneWithContext","loc":{"line":1,"column":32},"parent":"C:\\Users\\natal\\Documents\\chord-holder-v1\\node_modules\\tone\\build\\esm\\core\\util\\Draw.js","resolved":"C:\\Users\\natal\\Documents\\chord-holder-v1\\node_modules\\tone\\build\\esm\\core\\context\\ToneWithContext.js"},{"name":"./Timeline","loc":{"line":2,"column":25},"parent":"C:\\Users\\natal\\Documents\\chord-holder-v1\\node_modules\\tone\\build\\esm\\core\\util\\Draw.js","resolved":"C:\\Users\\natal\\Documents\\chord-holder-v1\\node_modules\\tone\\build\\esm\\core\\util\\Timeline.js"},{"name":"../context/ContextInitialization","loc":{"line":3,"column":46},"parent":"C:\\Users\\natal\\Documents\\chord-holder-v1\\node_modules\\tone\\build\\esm\\core\\util\\Draw.js","resolved":"C:\\Users\\natal\\Documents\\chord-holder-v1\\node_modules\\tone\\build\\esm\\core\\context\\ContextInitialization.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.Draw=void 0;var t=require(\"../context/ToneWithContext\"),e=require(\"./Timeline\"),i=require(\"../context/ContextInitialization\");class n extends t.ToneWithContext{constructor(){super(...arguments),this.name=\"Draw\",this.expiration=.25,this.anticipation=.008,this._events=new e.Timeline,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=t;){const e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}exports.Draw=n,(0,i.onContextInit)(t=>{t.draw=new n({context:t})}),(0,i.onContextClose)(t=>{t.draw.dispose()});"},"sourceMaps":{"js":{"mappings":[{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":123,"column":0},"generated":{"line":1,"column":0}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":123,"column":0},"generated":{"line":1,"column":13}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":123,"column":0},"generated":{"line":1,"column":20}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":123,"column":0},"generated":{"line":1,"column":35}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":123,"column":0},"generated":{"line":1,"column":43}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":123,"column":0},"generated":{"line":1,"column":56}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":123,"column":0},"generated":{"line":1,"column":57}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":123,"column":0},"generated":{"line":1,"column":64}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":123,"column":0},"generated":{"line":1,"column":68}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":123,"column":0},"generated":{"line":1,"column":76}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":123,"column":0},"generated":{"line":1,"column":86}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":88}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":92}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":94}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":102}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":132}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":134}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":142}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":156}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":158}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":166}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":28,"column":6},"generated":{"line":1,"column":202}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":28,"column":13},"generated":{"line":1,"column":208}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":28,"column":26},"generated":{"line":1,"column":218}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":28,"column":6},"generated":{"line":1,"column":220}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":28,"column":0},"generated":{"line":1,"column":236}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":123,"column":0},"generated":{"line":1,"column":250}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":123,"column":0},"generated":{"line":1,"column":259}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":30,"column":10},"generated":{"line":1,"column":270}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":30,"column":10},"generated":{"line":1,"column":275}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":30,"column":25},"generated":{"line":1,"column":280}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":35,"column":1},"generated":{"line":1,"column":287}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":35,"column":1},"generated":{"line":1,"column":292}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":35,"column":23},"generated":{"line":1,"column":303}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":42,"column":1},"generated":{"line":1,"column":307}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":42,"column":1},"generated":{"line":1,"column":312}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":42,"column":25},"generated":{"line":1,"column":325}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":47,"column":9},"generated":{"line":1,"column":330}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":47,"column":9},"generated":{"line":1,"column":335}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":47,"column":40},"generated":{"line":1,"column":343}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":47,"column":44},"generated":{"line":1,"column":347}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":47,"column":40},"generated":{"line":1,"column":349}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":52,"column":9},"generated":{"line":1,"column":358}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":52,"column":9},"generated":{"line":1,"column":363}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":52,"column":26},"generated":{"line":1,"column":378}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":52,"column":31},"generated":{"line":1,"column":383}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":52,"column":41},"generated":{"line":1,"column":393}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":52,"column":46},"generated":{"line":1,"column":398}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":57,"column":9},"generated":{"line":1,"column":404}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":57,"column":9},"generated":{"line":1,"column":409}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":57,"column":28},"generated":{"line":1,"column":426}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":70,"column":1},"generated":{"line":1,"column":428}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":70,"column":10},"generated":{"line":1,"column":437}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":70,"column":32},"generated":{"line":1,"column":439}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":79,"column":9},"generated":{"line":1,"column":442}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":71,"column":7},"generated":{"line":1,"column":449}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":71,"column":7},"generated":{"line":1,"column":454}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":71,"column":15},"generated":{"line":1,"column":462}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":71,"column":19},"generated":{"line":1,"column":466}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":72,"column":3},"generated":{"line":1,"column":467}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":72,"column":3},"generated":{"line":1,"column":476}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":73,"column":3},"generated":{"line":1,"column":478}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":73,"column":9},"generated":{"line":1,"column":483}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":73,"column":14},"generated":{"line":1,"column":488}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":73,"column":24},"generated":{"line":1,"column":498}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":76,"column":30},"generated":{"line":1,"column":503}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":76,"column":6},"generated":{"line":1,"column":507}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":76,"column":11},"generated":{"line":1,"column":512}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":76,"column":19},"generated":{"line":1,"column":520}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":77,"column":8},"generated":{"line":1,"column":529}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":77,"column":8},"generated":{"line":1,"column":534}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":77,"column":26},"generated":{"line":1,"column":550}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":77,"column":48},"generated":{"line":1,"column":572}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":77,"column":53},"generated":{"line":1,"column":577}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":79,"column":9},"generated":{"line":1,"column":594}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":86,"column":1},"generated":{"line":1,"column":599}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":86,"column":8},"generated":{"line":1,"column":606}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":88,"column":9},"generated":{"line":1,"column":609}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":87,"column":7},"generated":{"line":1,"column":616}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":87,"column":7},"generated":{"line":1,"column":621}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":87,"column":15},"generated":{"line":1,"column":629}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":87,"column":22},"generated":{"line":1,"column":636}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":87,"column":27},"generated":{"line":1,"column":641}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":87,"column":37},"generated":{"line":1,"column":651}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":88,"column":9},"generated":{"line":1,"column":655}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":94,"column":9},"generated":{"line":1,"column":660}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":95,"column":8},"generated":{"line":1,"column":672}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":95,"column":8},"generated":{"line":1,"column":678}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":95,"column":14},"generated":{"line":1,"column":680}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":95,"column":19},"generated":{"line":1,"column":685}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":95,"column":27},"generated":{"line":1,"column":693}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":96,"column":9},"generated":{"line":1,"column":705}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":96,"column":9},"generated":{"line":1,"column":710}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":96,"column":14},"generated":{"line":1,"column":715}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":96,"column":22},"generated":{"line":1,"column":723}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":96,"column":33},"generated":{"line":1,"column":731}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":96,"column":38},"generated":{"line":1,"column":736}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":96,"column":46},"generated":{"line":1,"column":744}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":96,"column":67},"generated":{"line":1,"column":751}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":96,"column":74},"generated":{"line":1,"column":756}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":96,"column":79},"generated":{"line":1,"column":761}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":96,"column":95},"generated":{"line":1,"column":775}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":96,"column":100},"generated":{"line":1,"column":778}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":97,"column":9},"generated":{"line":1,"column":779}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":97,"column":9},"generated":{"line":1,"column":785}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":97,"column":17},"generated":{"line":1,"column":787}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":97,"column":22},"generated":{"line":1,"column":792}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":97,"column":30},"generated":{"line":1,"column":800}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":98,"column":7},"generated":{"line":1,"column":808}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":98,"column":16},"generated":{"line":1,"column":811}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":98,"column":22},"generated":{"line":1,"column":813}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":98,"column":28},"generated":{"line":1,"column":815}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":98,"column":36},"generated":{"line":1,"column":821}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":98,"column":41},"generated":{"line":1,"column":826}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":99,"column":4},"generated":{"line":1,"column":838}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":99,"column":10},"generated":{"line":1,"column":840}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":102,"column":6},"generated":{"line":1,"column":851}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":102,"column":11},"generated":{"line":1,"column":856}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":102,"column":19},"generated":{"line":1,"column":864}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":102,"column":28},"generated":{"line":1,"column":871}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":103,"column":8},"generated":{"line":1,"column":875}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":103,"column":8},"generated":{"line":1,"column":880}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":103,"column":26},"generated":{"line":1,"column":896}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":103,"column":48},"generated":{"line":1,"column":918}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":103,"column":53},"generated":{"line":1,"column":923}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":107,"column":1},"generated":{"line":1,"column":940}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":111,"column":9},"generated":{"line":1,"column":950}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":108,"column":8},"generated":{"line":1,"column":957}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":108,"column":8},"generated":{"line":1,"column":963}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":109,"column":7},"generated":{"line":1,"column":973}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":109,"column":7},"generated":{"line":1,"column":978}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":109,"column":15},"generated":{"line":1,"column":986}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":110,"column":2},"generated":{"line":1,"column":996}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":110,"column":23},"generated":{"line":1,"column":1017}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":110,"column":28},"generated":{"line":1,"column":1022}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":111,"column":9},"generated":{"line":1,"column":1039}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":123,"column":0},"generated":{"line":1,"column":1045}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":123,"column":0},"generated":{"line":1,"column":1053}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":123,"column":0},"generated":{"line":1,"column":1058}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":119,"column":0},"generated":{"line":1,"column":1061}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":119,"column":14},"generated":{"line":1,"column":1063}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":119,"column":14},"generated":{"line":1,"column":1065}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":119,"column":14},"generated":{"line":1,"column":1080}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":1084}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":120,"column":9},"generated":{"line":1,"column":1086}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":120,"column":16},"generated":{"line":1,"column":1091}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":120,"column":20},"generated":{"line":1,"column":1095}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":120,"column":25},"generated":{"line":1,"column":1097}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":120,"column":27},"generated":{"line":1,"column":1098}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":120,"column":27},"generated":{"line":1,"column":1106}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":123,"column":0},"generated":{"line":1,"column":1113}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":123,"column":15},"generated":{"line":1,"column":1115}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":123,"column":15},"generated":{"line":1,"column":1117}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":123,"column":15},"generated":{"line":1,"column":1133}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":124,"column":1},"generated":{"line":1,"column":1137}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":124,"column":9},"generated":{"line":1,"column":1139}},{"source":"../../../../Tone/core/util/Draw.ts","name":null,"original":{"line":124,"column":14},"generated":{"line":1,"column":1144}}],"sources":{"../../../../Tone/core/util/Draw.ts":"import { ToneWithContext, ToneWithContextOptions } from \"../context/ToneWithContext\";\nimport { Seconds, Time } from \"../type/Units\";\nimport { Timeline, TimelineEvent } from \"./Timeline\";\nimport { onContextClose, onContextInit } from \"../context/ContextInitialization\";\n\ninterface DrawEvent extends TimelineEvent {\n\tcallback: () => void;\n}\n\n/**\n * Draw is useful for synchronizing visuals and audio events.\n * Callbacks from Tone.Transport or any of the Tone.Event classes\n * always happen _before_ the scheduled time and are not synchronized\n * to the animation frame so they are not good for triggering tightly\n * synchronized visuals and sound. Draw makes it easy to schedule\n * callbacks using the AudioContext time and uses requestAnimationFrame.\n * @example\n * Tone.Transport.schedule((time) => {\n * \t// use the time argument to schedule a callback with Draw\n * \tTone.Draw.schedule(() => {\n * \t\t// do drawing or DOM manipulation here\n * \t\tconsole.log(time);\n * \t}, time);\n * }, \"+0.5\");\n * Tone.Transport.start();\n * @category Core\n */\nexport class Draw extends ToneWithContext<ToneWithContextOptions> {\n\n\treadonly name: string = \"Draw\";\n\n\t/**\n\t * The duration after which events are not invoked.\n\t */\n\texpiration: Seconds = 0.25;\n\n\t/**\n\t * The amount of time before the scheduled time\n\t * that the callback can be invoked. Default is\n\t * half the time of an animation frame (0.008 seconds).\n\t */\n\tanticipation: Seconds = 0.008;\n\n\t/**\n\t * All of the events.\n\t */\n\tprivate _events: Timeline<DrawEvent> = new Timeline();\n\n\t/**\n\t * The draw loop\n\t */\n\tprivate _boundDrawLoop = this._drawLoop.bind(this);\n\n\t/**\n\t * The animation frame id\n\t */\n\tprivate _animationFrame = -1;\n\n\t/**\n\t * Schedule a function at the given time to be invoked\n\t * on the nearest animation frame.\n\t * @param  callback  Callback is invoked at the given time.\n\t * @param  time      The time relative to the AudioContext time to invoke the callback.\n\t * @example\n\t * Tone.Transport.scheduleRepeat(time => {\n\t * \tTone.Draw.schedule(() => console.log(time), time);\n\t * }, 1);\n\t * Tone.Transport.start();\n\t */\n\tschedule(callback: () => void, time: Time): this {\n\t\tthis._events.add({\n\t\t\tcallback,\n\t\t\ttime: this.toSeconds(time),\n\t\t});\n\t\t// start the draw loop on the first event\n\t\tif (this._events.length === 1) {\n\t\t\tthis._animationFrame = requestAnimationFrame(this._boundDrawLoop);\n\t\t}\n\t\treturn this;\n\t}\n\n\t/**\n\t * Cancel events scheduled after the given time\n\t * @param  after  Time after which scheduled events will be removed from the scheduling timeline.\n\t */\n\tcancel(after?: Time): this {\n\t\tthis._events.cancel(this.toSeconds(after));\n\t\treturn this;\n\t}\n\n\t/**\n\t * The draw loop\n\t */\n\tprivate _drawLoop(): void {\n\t\tconst now = this.context.currentTime;\n\t\twhile (this._events.length && (this._events.peek() as DrawEvent).time - this.anticipation <= now) {\n\t\t\tconst event = this._events.shift();\n\t\t\tif (event && now - event.time <= this.expiration) {\n\t\t\t\tevent.callback();\n\t\t\t}\n\t\t}\n\t\tif (this._events.length > 0) {\n\t\t\tthis._animationFrame = requestAnimationFrame(this._boundDrawLoop);\n\t\t}\n\t}\n\n\tdispose(): this {\n\t\tsuper.dispose();\n\t\tthis._events.dispose();\n\t\tcancelAnimationFrame(this._animationFrame);\n\t\treturn this;\n\t}\n}\n\n//-------------------------------------\n// \tINITIALIZATION\n//-------------------------------------\n\nonContextInit(context => {\n\tcontext.draw = new Draw({ context });\n});\n\nonContextClose(context => {\n\tcontext.draw.dispose();\n});\n"},"lineCount":null}},"error":null,"hash":"5a9db4484b6ebb71a330b74c70765ef0","cacheData":{"env":{}}}